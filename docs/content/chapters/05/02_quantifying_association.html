
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Quantifying Association &#8212; Data, Inference, and Decisions</title>
    
  <link rel="stylesheet" href="../../../_static/css/index.73d71520a4ca3b99cfee5594769eaaae.css">

    
  <link rel="stylesheet"
    href="../../../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      
  <link rel="stylesheet"
    href="../../../_static/vendor/open-sans_all/1.44.1/index.css">
  <link rel="stylesheet"
    href="../../../_static/vendor/lato_latin-ext/1.44.1/index.css">

    
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/sphinx-book-theme.40e2e510f6b7d1648584402491bb10fe.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="../../../_static/js/index.3da636dd464baa7582d2.js">

    <script id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
    <script src="../../../_static/jquery.js"></script>
    <script src="../../../_static/underscore.js"></script>
    <script src="../../../_static/doctools.js"></script>
    <script src="../../../_static/togglebutton.js"></script>
    <script src="../../../_static/clipboard.min.js"></script>
    <script src="../../../_static/copybutton.js"></script>
    <script >var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../../../_static/sphinx-book-theme.d31b09fe5c1d09cb49b26a786de4a05d.js"></script>
    <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"inlineMath": [["\\(", "\\)"]], "displayMath": [["\\[", "\\]"]], "processRefs": false, "processEnvironments": false}})</script>
    <script async="async" src="https://unpkg.com/thebelab@latest/lib/index.js"></script>
    <script >
        const thebe_selector = ".thebe"
        const thebe_selector_input = "pre"
        const thebe_selector_output = ".output"
    </script>
    <script async="async" src="../../../_static/sphinx-thebe.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Causality" href="03_causality.html" />
    <link rel="prev" title="Association, Correlation, and Causation" href="01_association_correlation_causation.html" />

    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en" />



  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
<a class="navbar-brand text-wrap" href="../../../index.html">
  
  
  <h1 class="site-logo" id="site-title">Data, Inference, and Decisions</h1>
  
</a>
</div><form class="bd-search d-flex align-items-center" action="../../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form>
<nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
    <ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../../intro.html">
   Data, Inference, and Decisions
  </a>
 </li>
</ul>
<ul class="current nav sidenav_l1">
 <li class="toctree-l1 collapsible-parent">
  <a class="reference internal" href="../01/intro.html">
   Chapter 1: Hypotheses and decisions
  </a>
  <ul class="simple collapse-ul">
  </ul>
  <i class="fas fa-chevron-down">
  </i>
 </li>
 <li class="toctree-l1 collapsible-parent">
  <a class="reference internal" href="../02/intro.html">
   Chapter 2: Bayesian modeling
  </a>
  <ul class="collapse-ul">
   <li class="toctree-l2">
    <a class="reference internal" href="../02/placeholder.html">
     Intro to Bayesian modeling
    </a>
   </li>
  </ul>
  <i class="fas fa-chevron-down">
  </i>
 </li>
 <li class="toctree-l1 collapsible-parent">
  <a class="reference internal" href="../03/intro.html">
   Chapter 3: Generalized linear models
  </a>
  <ul class="collapse-ul">
   <li class="toctree-l2">
    <a class="reference internal" href="../03/placeholder.html">
     Generalized Linear Models
    </a>
   </li>
  </ul>
  <i class="fas fa-chevron-down">
  </i>
 </li>
 <li class="toctree-l1 collapsible-parent">
  <a class="reference internal" href="../04/intro.html">
   Chapter 4: Uncertainty and the bootstrap
  </a>
  <ul class="collapse-ul">
   <li class="toctree-l2">
    <a class="reference internal" href="../04/placeholder.html">
     Uncertainty and the Bootstrap
    </a>
   </li>
  </ul>
  <i class="fas fa-chevron-down">
  </i>
 </li>
 <li class="toctree-l1 current active collapsible-parent">
  <a class="reference internal" href="intro.html">
   Chapter 5: Causal Inference
  </a>
  <ul class="current collapse-ul">
   <li class="toctree-l2">
    <a class="reference internal" href="01_association_correlation_causation.html">
     Association, correlation, and causation
    </a>
   </li>
   <li class="toctree-l2 current active">
    <a class="current reference internal" href="#">
     Quantifying Association
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="03_causality.html">
     Causality
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="04_randomized_experiments.html">
     Causal Inference in Randomized Experiments
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="05_observational_studies.html">
     Causal Inference in Observational Studies
    </a>
   </li>
  </ul>
  <i class="fas fa-chevron-down">
  </i>
 </li>
</ul>

</nav> <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="row topbar fixed-top container-xl">
    <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show">
    </div>
    <div class="col pl-2 topbar-main">
        
        <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
            data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
            aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
            title="Toggle navigation" data-toggle="tooltip" data-placement="left">
            <i class="fas fa-bars"></i>
            <i class="fas fa-arrow-left"></i>
            <i class="fas fa-arrow-up"></i>
        </button>
        
        
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="../../../_sources/content/chapters/05/02_quantifying_association.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.ipynb</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
            onClick="window.print()" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

        <!-- Source interaction buttons -->


        <!-- Full screen (wrap in <a> to have style consistency -->
        <a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
                data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
                title="Fullscreen mode"><i
                    class="fas fa-expand"></i></button></a>

        <!-- Launch buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Launch interactive content"><i class="fas fa-rocket"></i></button>
    <div class="dropdown-buttons">
        
        <a class="binder-button" href="https://mybinder.org/v2/gh/executablebooks/jupyter-book/master?urlpath=tree/content/chapters/05/02_quantifying_association.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Launch Binder" data-toggle="tooltip"
                data-placement="left"><img class="binder-button-logo"
                    src="../../../_static/images/logo_binder.svg"
                    alt="Interact on binder">Binder</button></a>
        
        
        
        
    </div>
</div>

    </div>

    <!-- Table of contents -->
    <div class="d-none d-md-block col-md-2 bd-toc show">
        
        <div class="tocsection onthispage pt-5 pb-3">
            <i class="fas fa-list"></i> Contents
        </div>
        <nav id="bd-toc-nav">
            <ul class="nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#numerical-data-correlation-and-regression">
   Numerical Data: Correlation and Regression
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#correlation-coefficient">
     Correlation coefficient
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#linear-regression">
     Linear regression
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#multiple-linear-regression">
     Multiple linear regression
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#categorical-data">
   Categorical Data
  </a>
 </li>
</ul>

        </nav>
        
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
        
              <div>
                
  <div class="section" id="quantifying-association">
<h1>Quantifying Association<a class="headerlink" href="#quantifying-association" title="Permalink to this headline">¶</a></h1>
<p>We’ll start our journey into causal inference by looking at several ways of quantifying association.</p>
<p>Throughout, we’ll assume we have two random variables, <span class="math notranslate nohighlight">\(x\)</span> and <span class="math notranslate nohighlight">\(y\)</span>. Although most of the methods we’ll describe can be used regardless of how we interpret them, it will be helpful when we move to causality to think of <span class="math notranslate nohighlight">\(x\)</span> as either a treatment or covariate, and to think of <span class="math notranslate nohighlight">\(y\)</span> as an outcome.</p>
<div class="section" id="numerical-data-correlation-and-regression">
<h2>Numerical Data: Correlation and Regression<a class="headerlink" href="#numerical-data-correlation-and-regression" title="Permalink to this headline">¶</a></h2>
<div class="section" id="correlation-coefficient">
<h3>Correlation coefficient<a class="headerlink" href="#correlation-coefficient" title="Permalink to this headline">¶</a></h3>
<p>There are a few different ways to measure correlation. The most common is the <strong>Pearson correlation</strong> (also called the correlation coefficient), usually denoted with <span class="math notranslate nohighlight">\(r\)</span> or <span class="math notranslate nohighlight">\(\rho\)</span> (the greek letter <em>rho</em>):</p>
<div class="math notranslate nohighlight">
\[
    \rho_{xy} = \frac{\text{cov}(X, Y)}{\sqrt{\text{var}(x)\text{var}(y)}}
\]</div>
<p>This is a good measure of the linear association between <span class="math notranslate nohighlight">\(x\)</span> and <span class="math notranslate nohighlight">\(y\)</span>. For a refresher on Pearson correlation, see the <a class="reference external" href="https://www.inferentialthinking.com/chapters/15/1/Correlation.html">Data 8 textbook</a> and the <a class="reference external" href="http://prob140.org/textbook/content/Chapter_13/01_Covariance.html#correlation">Prob 140 textbook</a>.</p>
</div>
<div class="section" id="linear-regression">
<h3>Linear regression<a class="headerlink" href="#linear-regression" title="Permalink to this headline">¶</a></h3>
<p>If we were to fit a linear model to predict <span class="math notranslate nohighlight">\(y\)</span> from <span class="math notranslate nohighlight">\(x\)</span>, it would look something like:</p>
<div class="math notranslate nohighlight">
\[y = \alpha + \beta x + \varepsilon.\]</div>
<p>As usual, we assume that <span class="math notranslate nohighlight">\(\varepsilon\)</span> is zero-mean noise, with the additional property that cov<span class="math notranslate nohighlight">\((x, \varepsilon) = 0\)</span>. We’ve talked a lot about how to interpret this as a predictive model, but now we’ll look at it slightly differently.</p>
<p>We’ll think of this equation as simply a descriptive explanation of a relationship between <span class="math notranslate nohighlight">\(x\)</span> and <span class="math notranslate nohighlight">\(y\)</span>, where the most important part of the relationship is <span class="math notranslate nohighlight">\(\beta\)</span>. We can use all the same computational machinery we’ve already developed to fit the model and compute <span class="math notranslate nohighlight">\(\beta\)</span>, and the interpretation is subject to the limitations we’ve already learned about (e.g., it doesn’t capture nonlinear association, it can be impacted by outliers, etc.). While it’s common to describe <span class="math notranslate nohighlight">\(\beta\)</span> as quantifying the “effect” of <span class="math notranslate nohighlight">\(x\)</span> on <span class="math notranslate nohighlight">\(y\)</span>, it’s important to understand the limitations of the word “effect” here: linear regression can only tell us the <em>predictive</em> effect, rather than the causal effect.</p>
<p>So, we’ll use the coefficient <span class="math notranslate nohighlight">\(\beta\)</span> as a means to quantify the relationship between <span class="math notranslate nohighlight">\(x\)</span> and <span class="math notranslate nohighlight">\(y\)</span>. Starting from our assumption that cov<span class="math notranslate nohighlight">\((x, \varepsilon) = 0\)</span> and using properties of covariance, we can show that <span class="math notranslate nohighlight">\(\beta = \frac{\text{cov}(x, y)}{\text{var}(x)}\)</span>. From here, we can also show that <span class="math notranslate nohighlight">\(\beta = \rho_{xy} \sqrt{\frac{\text{var}(y)}{\text{var}(x)}}\)</span> (as you may have seen empirically in Data 8).</p>
<p>For example, suppose we’re interested in quantifying the relationship between the number of years of schooling an individual has received (<span class="math notranslate nohighlight">\(x\)</span>) and their income (<span class="math notranslate nohighlight">\(y\)</span>). If we were to compute the coefficient <span class="math notranslate nohighlight">\(\beta\)</span>, it would provide a way of quantifying the association between these two variables.</p>
</div>
<div class="section" id="multiple-linear-regression">
<h3>Multiple linear regression<a class="headerlink" href="#multiple-linear-regression" title="Permalink to this headline">¶</a></h3>
<p><em>This section is in progress.</em></p>
<p>Suppose we are now interested in quantifying the relationship between two variables <span class="math notranslate nohighlight">\(x\)</span> and <span class="math notranslate nohighlight">\(y\)</span>, but we also want to account for or “control for” the effect of a third variable, <span class="math notranslate nohighlight">\(w\)</span>. Assuming a linear relationship between them, we can extend our earlier relationship:</p>
<div class="math notranslate nohighlight">
\[y = \alpha + \beta x + \gamma w + \varepsilon.\]</div>
<p>In this case, we can interpret <span class="math notranslate nohighlight">\(\beta\)</span> as a measure of association between <span class="math notranslate nohighlight">\(x\)</span> and <span class="math notranslate nohighlight">\(y\)</span> while controlling for the effect of a third variable <span class="math notranslate nohighlight">\(w\)</span>.</p>
<p>Here are some refresher resources on linear regression:</p>
<ul class="simple">
<li><p><a class="reference external" href="http://prob140.org/textbook/content/Chapter_24/00_Simple_Linear_Regression.html">Prob 140 textbook Chapter 24</a></p></li>
<li><p>Data 100 textbook: <a class="reference external" href="https://www.textbook.ds100.org/ch/14/linear_models.html">Chapter 14</a> and <a class="reference external" href="https://www.textbook.ds100.org/ch/18/mult_model.html">Chapter 18</a></p></li>
</ul>
</div>
</div>
<div class="section" id="categorical-data">
<h2>Categorical Data<a class="headerlink" href="#categorical-data" title="Permalink to this headline">¶</a></h2>
<p>Correlation and regression coefficients are a fine way to measure association between continuous numerical variables, but what if our data are categorical? We’ll restrict ourselves to binary data in this section for simplicity. We’ll look at three commonly used metrics for these cases: risk difference, risk ratio, and odds ratio.</p>
<p>When dealing with categorical data, we’ll often start by visualizing the data in a contingency table.  We’ve already seen examples of these in the previous section, when we looked at <todo simpson example>.</p>
<table class="colwidths-auto table">
<thead>
<tr class="row-odd"><th class="head"><p></p></th>
<th class="head"><p><span class="math notranslate nohighlight">\(y=0\)</span></p></th>
<th class="head"><p><span class="math notranslate nohighlight">\(y=1\)</span></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><span class="math notranslate nohighlight">\(x=0\)</span></p></td>
<td><p><span class="math notranslate nohighlight">\(n_{00}\)</span></p></td>
<td><p><span class="math notranslate nohighlight">\(n_{01}\)</span></p></td>
</tr>
<tr class="row-odd"><td><p><span class="math notranslate nohighlight">\(x=1\)</span></p></td>
<td><p><span class="math notranslate nohighlight">\(n_{10}\)</span></p></td>
<td><p><span class="math notranslate nohighlight">\(n_{11}\)</span></p></td>
</tr>
</tbody>
</table>
<p>Note that these are different from the 2x2 tables that we used at the beginning of the course: there, the rows and columns represented reality and our decisions, respectively. Here, they represent two different observed variables in our data. Just as with those tables, there’s no standard convention about what to put in the rows vs the columns.</p>
<p>For example, suppose we are interested in examining the relationship between receiving a vaccine (<span class="math notranslate nohighlight">\(x\)</span>) for a particular virus and being infected with that virus (<span class="math notranslate nohighlight">\(y\)</span>). We’ll look at a study conducted on that vaccine. We’ll use <span class="math notranslate nohighlight">\(x=1\)</span> to indicate getting the vaccine, and <span class="math notranslate nohighlight">\(y=1\)</span> to indicate being infected with the virus. In this case, for example, <span class="math notranslate nohighlight">\(n_{10}\)</span> would represent the number of people in the study who received the vaccine and did not get infected.</p>
<p>Most of the metrics we’ll discuss are based on the <strong>risk</strong>, which represents the probability of <span class="math notranslate nohighlight">\(y=1\)</span> given a particular value of <span class="math notranslate nohighlight">\(x\)</span>. For example, the <strong>risk difference (RD)</strong> is defined as follows:</p>
<div class="math notranslate nohighlight">
\[\begin{split}
\begin{align}
RD 
    &amp;= \underbrace{P(y=1 \mid x=1)}_{\text{risk for }x=1}
       - \underbrace{P(y=1 \mid x=0)}_{\text{risk for }x=0} \\
    &amp;= \quad\,\overbrace{\frac{n_{11}}{n_{10} + n_{11}}}^{} \quad\,\,-\quad\, \overbrace{\frac{n_{01}}{n_{00} + n_{01}}}^{}
\end{align}
\end{split}\]</div>
<p>In our vaccination example, the term <em>risk</em> has an intuitive interpretation: it represents your risk of being infected given whether or not you were vaccinated. If the vaccine works as intended (i.e., there’s a strong association between being vaccinated and being infected), your risk of being infected should decrease after being vaccinated, and the risk difference should be a negative number far from 0. On the other hand, if there’s little to no relationship between vaccination and infection, then the two terms should be very similar, and the risk difference should be close to 0. We can see the same fact mathematically. If <span class="math notranslate nohighlight">\(x\)</span> and <span class="math notranslate nohighlight">\(y\)</span> are independent, then <span class="math notranslate nohighlight">\(P(y=1 \mid x=1) = P(y=1 \mid x=0) = P(y=1)\)</span>, so the two terms are equal. This means that they cancel and that the risk difference is 0.</p>
<p>The <strong>risk ratio (RR)</strong> is defined similarly as the ratio (instead of the difference) between the two quantities above:</p>
<div class="math notranslate nohighlight">
\[
RR = \frac{P(y=1 \mid x=1)}{P(y=1 \mid x=0)}
\]</div>
<p>We can use similar reasoning as above to conclude that this ratio should 1 when <span class="math notranslate nohighlight">\(x\)</span> and <span class="math notranslate nohighlight">\(y\)</span> are independent.</p>
<p>The third commonly used measure is the <strong>odds ratio (OR)</strong>. It’s the ratio of two odds, where each odds is itself a ratio:</p>
<div class="math notranslate nohighlight">
\[
OR = \frac{%
        \overbrace{P(y=1|x=1)/P(y=0|x=1)}^{\text{odds of }y\text{ in the presence of }x}}{%
        \underbrace{P(y=1|x=0)/P(y=0|x=0)}_{\text{odds of }y\text{ in the presence of }x}}
\]</div>
<p>While this looks more complicated, we can show that it simplifies to:</p>
<div class="math notranslate nohighlight">
\[
OR = \frac{n_{00}}{n_{10}} \cdot \frac{n_{11}}{n_{01}}
\]</div>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./content/chapters/05"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
        </div>
    </div>
    
    
    <div class='prev-next-bottom'>
        
    <a class='left-prev' id="prev-link" href="01_association_correlation_causation.html" title="previous page">Association, Correlation, and Causation</a>
    <a class='right-next' id="next-link" href="03_causality.html" title="next page">Causality</a>

    </div>
    <footer class="footer mt-5 mt-md-0">
    <div class="container">
      <p>
        
          By Data 102 Staff<br/>
        
            &copy; Copyright 2020.<br/>
      </p>
    </div>
  </footer>
</main>


      </div>
    </div>

    
  <script src="../../../_static/js/index.3da636dd464baa7582d2.js"></script>


    
  </body>
</html>